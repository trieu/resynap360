{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "TrackEventModel",
    "type": "object",
    "required": [
      "schema_version",
      "event_id",
      "tenant_id",
      "datetime",
      "unix_timestamp",
      "metric",
      "visid",
      "mediahost",
      "tpurl",
      "profile_traits"
    ],
    "properties": {
      "schema_version": {
        "type": "string",
        "pattern": "^\\d{4}\\.\\d{2}\\.\\d{2}$"
      },
      "event_id": {
        "type": "string",
        "format": "uuid"
      },
      "tenant_id": {
        "type": "string"
      },
      "datetime": {
        "type": "string",
        "format": "date-time"
      },
      "unix_timestamp": {
        "type": "number"
      },
      "metric": {
        "type": "string"
      },
      "visid": {
        "type": "string",
        "format": "uuid"
      },
      "mediahost": {
        "type": "string"
      },
      "tpurl": {
        "type": "string",
        "format": "uri"
      },
      "profile_traits": {
        "type": "object",
        "required": ["phone_number", "first_name"],
        "properties": {
          "phone_number": {
            "type": "string",
            "pattern": "^\\d{9,15}$"
          },
          "first_name": { "type": "string" },
          "last_name": { "type": "string" },
          "gender": {
            "type": "string",
            "enum": ["male", "female", "unknown", "other"]
          },
          "date_of_birth": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "source_system": { "type": "string" },
          "address_line1": { "type": "string" },
          "city": { "type": "string" },
          "ext_attributes": {
            "type": "object",
            "properties": {
              "referrer": { "type": "string" },
              "utmdata": {
                "type": "object",
                "properties": {
                  "utmsource": { "type": "string" },
                  "utmmedium": { "type": "string" },
                  "utmcampaign": { "type": "string" },
                  "utmterm": { "type": "string" },
                  "utmcontent": { "type": "string" }
                },
                "additionalProperties": true
              }
            },
            "additionalProperties": {
              "type": ["string", "number", "boolean", "null", "object", "array"]
            }
          }
        },
        "additionalProperties": true
      }
    },
    "additionalProperties": false
  }
  